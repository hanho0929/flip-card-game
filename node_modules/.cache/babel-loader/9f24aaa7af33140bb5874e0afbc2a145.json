{"ast":null,"code":"var _jsxFileName = \"/Users/hanho/Desktop/React/FRE-Training-031521/flip-card-game/src/App.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState, useRef } from \"react\";\nimport { Dialog, DialogActions, Button, DialogTitle } from \"@material-ui/core\";\nimport Card from \"./components/card/card\";\nimport \"./app.scss\";\nimport uniqueCardsArray from './cardsArray';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction shuffleCards(array) {\n  const length = array.length;\n\n  for (let i = length; i > 0; i--) {\n    const randomIndex = Math.floor(Math.random() * i);\n    const currentIndex = i - 1;\n    const temp = array[currentIndex];\n    array[currentIndex] = array[randomIndex];\n    array[randomIndex] = temp;\n  }\n\n  return array;\n}\n\nexport default function App() {\n  _s();\n\n  const [cards, setCards] = useState(() => shuffleCards(uniqueCardsArray.concat(uniqueCardsArray)));\n  const [openCards, setOpenCards] = useState([]);\n  const [clearedCards, setClearedCards] = useState({});\n  const [shouldDisableAllCards, setShouldDisableAllCards] = useState(false);\n  const [showModal, setShowModal] = useState(false);\n  const timeout = useRef(null);\n\n  const disable = () => {\n    setShouldDisableAllCards(true);\n  };\n\n  const enable = () => {\n    setShouldDisableAllCards(false);\n  };\n\n  const checkCompletion = () => {\n    if (Object.keys(clearedCards).length === uniqueCardsArray.length) {\n      setShowModal(true); // console.log(\"You Win!!\");\n    }\n  };\n\n  const evaluate = () => {\n    const [first, second] = openCards;\n    enable();\n\n    if (cards[first].type === cards[second].type) {\n      setClearedCards(prev => ({ ...prev,\n        [cards[first].type]: true\n      }));\n      setOpenCards([]);\n      return;\n    } // This is to flip the cards back after cetain time duration\n\n\n    timeout.current = setTimeout(() => {\n      setOpenCards([]);\n    }, 200);\n  };\n\n  const handleCardClick = index => {\n    if (openCards.length === 1) {\n      setOpenCards(prev => [...prev, index]);\n      disable();\n    } else {\n      clearTimeout(timeout.current);\n      setOpenCards([index]);\n    }\n  };\n\n  useEffect(() => {\n    let timeout = null;\n\n    if (openCards.length === 2) {\n      timeout = setTimeout(evaluate, 300);\n    }\n\n    return () => {\n      clearTimeout(timeout);\n    };\n  }, [openCards]);\n  useEffect(() => {\n    checkCompletion();\n  }, [clearedCards]);\n\n  const checkIsFlipped = index => {\n    return openCards.includes(index);\n  };\n\n  const checkIsInactive = card => {\n    return Boolean(clearedCards[card.type]);\n  };\n\n  const handleRestart = () => {\n    setClearedCards({});\n    setOpenCards([]);\n    setShowModal(false);\n    setShouldDisableAllCards(false); // shuffle again with random\n\n    setCards(shuffleCards(uniqueCardsArray.concat(uniqueCardsArray)));\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      children: /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Flip card game\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: cards.map((card, index) => {\n        return /*#__PURE__*/_jsxDEV(Card, {\n          card: card,\n          index: index,\n          isDisabled: shouldDisableAllCards,\n          isInactive: checkIsInactive(card),\n          isFlipped: checkIsFlipped(index),\n          onClick: handleCardClick\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"restart\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleRestart,\n          color: \"primary\",\n          variant: \"contained\",\n          children: \"Restart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: showModal,\n      disableBackdropClick: true,\n      disableEscapeKeyDown: true,\n      children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n        children: \"You completed the challenge\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleRestart,\n          color: \"primary\",\n          children: \"Restart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 101,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"RytQtG9ger7nPOtOT+1/5SqcXxA=\");\n\n_c = App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/hanho/Desktop/React/FRE-Training-031521/flip-card-game/src/App.js"],"names":["useEffect","useState","useRef","Dialog","DialogActions","Button","DialogTitle","Card","uniqueCardsArray","shuffleCards","array","length","i","randomIndex","Math","floor","random","currentIndex","temp","App","cards","setCards","concat","openCards","setOpenCards","clearedCards","setClearedCards","shouldDisableAllCards","setShouldDisableAllCards","showModal","setShowModal","timeout","disable","enable","checkCompletion","Object","keys","evaluate","first","second","type","prev","current","setTimeout","handleCardClick","index","clearTimeout","checkIsFlipped","includes","checkIsInactive","card","Boolean","handleRestart","map"],"mappings":"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","sourcesContent":["import { useEffect, useState, useRef } from \"react\";\nimport {\n  Dialog,\n  DialogActions,\n  Button,\n  DialogTitle\n} from \"@material-ui/core\";\nimport Card from \"./components/card/card\";\nimport \"./app.scss\";\nimport uniqueCardsArray from './cardsArray'\n\nfunction shuffleCards(array) {\n  const length = array.length;\n  for (let i = length; i > 0; i--) {\n    const randomIndex = Math.floor(Math.random() * i);\n    const currentIndex = i - 1;\n    const temp = array[currentIndex];\n    array[currentIndex] = array[randomIndex];\n    array[randomIndex] = temp;\n  }\n  return array;\n}\nexport default function App() {\n  const [cards, setCards] = useState(() =>\n    shuffleCards(uniqueCardsArray.concat(uniqueCardsArray))\n  );\n  const [openCards, setOpenCards] = useState([]);\n  const [clearedCards, setClearedCards] = useState({});\n  const [shouldDisableAllCards, setShouldDisableAllCards] = useState(false);\n  const [showModal, setShowModal] = useState(false);\n  const timeout = useRef(null);\n\n  const disable = () => {\n    setShouldDisableAllCards(true);\n  };\n  const enable = () => {\n    setShouldDisableAllCards(false);\n  };\n\n  const checkCompletion = () => {\n    if (Object.keys(clearedCards).length === uniqueCardsArray.length) {\n      setShowModal(true);\n      // console.log(\"You Win!!\");\n    }\n  };\n\n  const evaluate = () => {\n    const [first, second] = openCards;\n    enable();\n    if (cards[first].type === cards[second].type) {\n      setClearedCards((prev) => ({ ...prev, [cards[first].type]: true }));\n      setOpenCards([]);\n      return;\n    }\n    // This is to flip the cards back after cetain time duration\n    timeout.current = setTimeout(() => {\n      setOpenCards([]);\n    }, 200);\n  };\n  const handleCardClick = (index) => {\n    if (openCards.length === 1) {\n      setOpenCards((prev) => [...prev, index]);\n      disable();\n    } else {\n      clearTimeout(timeout.current);\n      setOpenCards([index]);\n    }\n  };\n\n  useEffect(() => {\n    let timeout = null;\n    if (openCards.length === 2) {\n      timeout = setTimeout(evaluate, 300);\n    }\n    return () => {\n      clearTimeout(timeout);\n    };\n  }, [openCards]);\n\n  useEffect(() => {\n    checkCompletion();\n  }, [clearedCards]);\n  const checkIsFlipped = (index) => {\n    return openCards.includes(index);\n  };\n\n  const checkIsInactive = (card) => {\n    return Boolean(clearedCards[card.type]);\n  };\n\n  const handleRestart = () => {\n    setClearedCards({});\n    setOpenCards([]);\n    setShowModal(false);\n    setShouldDisableAllCards(false);\n    // shuffle again with random\n    setCards(shuffleCards(uniqueCardsArray.concat(uniqueCardsArray)));\n  };\n\n  return (\n    <div className=\"App\">\n      <header>\n        <h3>Flip card game</h3>\n      </header>\n      <div className=\"container\">\n        {cards.map((card, index) => {\n          return (\n            <Card\n              key={index}\n              card={card}\n              index={index}\n              isDisabled={shouldDisableAllCards}\n              isInactive={checkIsInactive(card)}\n              isFlipped={checkIsFlipped(index)}\n              onClick={handleCardClick}\n            />\n          );\n        })}\n      </div>\n      <footer>\n        <div className=\"restart\">\n          <Button onClick={handleRestart} color=\"primary\" variant=\"contained\">\n            Restart\n          </Button>\n        </div>\n      </footer>\n      <Dialog\n        open={showModal}\n        disableBackdropClick\n        disableEscapeKeyDown\n      >\n        <DialogTitle>\n          You completed the challenge\n        </DialogTitle>\n        <DialogActions>\n          <Button onClick={handleRestart} color=\"primary\">\n            Restart\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}